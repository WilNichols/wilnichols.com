{% macro AlbumInfo(el="div") -%}
  <{{ el }} class="album-info">
    <a href="../" class="page-info__entry--back-link"><span class="page-info__entry__key">{% include "../static/img/back--12.svg" %}</span><span class="page-info__entry__value">Back</span></a>
    <ul class="album-info__list">
      <li class="album-info__entry album-info__entry--date"><span class="album-info__entry__key">{% include "../static/img/published--12.svg" %}</span><span class="album-info__entry__value">{{ date | readableDateISO }}</span></li>
      {%- set tagName = "" -%}
      {%- for tag in tags -%}
        {%- if (not "AlbumGroup" in tag) and (not "Albums" in tag) -%}
          {%- set parsedTag = tag.split('/') -%}
          {%- set thisTagName = parsedTag[0] -%}
          {%- set thisTagIcon -%}
            {% if thisTagName == "Group" %}{% include "../static/img/group--12.svg" %}
            {% elif thisTagName == "Camera" %}{% include "../static/img/camera--12.svg" %}
            {% elif thisTagName == "Location" %}{% include "../static/img/location--12.svg" %}
            {% elif thisTagName == "Period" %}{% include "../static/img/period--12.svg" %}
            {% endif %}
          {%- endset -%}
          {%- set thisTagValue = parsedTag[1] -%}
          {%- if ((loop.index > 2) and (tagName != thisTagName)) -%}</span></li>{%- endif -%}
          {%- if tagName != thisTagName -%}
            <li class="album-info__entry album-info__entry--{{ thisTagName }}">
              <span class="album-info__entry__key">{{- thisTagIcon | safe -}}</span>
              <span class="album-info__entry__value">{{- thisTagValue -}}{%- elif tagName == thisTagName -%}, {{ thisTagValue -}}{% endif %}
        {%- endif -%}
        {%- set tagName = thisTagName -%}
        {%- if loop.last -%}</span></li>{%- endif -%}
      {%- endfor -%}
    </ul>
  </{{ el }}>
{%- endmacro %}

{% macro EditorialInfo(backlinks) %}
  {% set title %}{{ altTitle if altTitle }}{{ page.fileSlug if not altTitle }}{% endset %}
  {% set date %}{{ date | readableDateISO }}{% endset %}
  {% set updated %}{{ updated | readableDateISO }}{% endset %}
  {# {% set showType %}{{ true if (page.data.type != 'Note') }}{% endset %} #}
  
  {% set isEvergreen %}{% for tag in tags %}{{ true if ("Evergreen/" in tag) }}{% endfor %}{% endset %}
  {% set showTags %}{% for tag in tags %}{{ true if ("Topic/" in tag) }}{% endfor %}{% endset %}
  <aside class="page-info">
    <div class="back-to-index"><a href="/" class="back-to-index__button">{% include "../static/img/arrow-left--16.svg" %}</a></div>
    <ul class="page-info__list">
      <li class="page-info__entry">
        <span class="page-info__entry__key">Published</span><span class="page-info__entry__value">{{ date }}</span></li>
      {%- if update and (date != updated) -%}
        <li class="page-info__entry">
          <span class="page-info__entry__key">Updated</span><span class="page-info__entry__value">{{ updated }}</span></li>
      {%- endif -%}
      {# {{ tags }} #}
      {%- if isEvergreen -%}
        <li class="page-info__entry"><span class="page-info__entry__key">Revision</span><span class="page-info__entry__value">{% for tag in tags %}{% if "Evergreen" in tag %}{{ tag | getRevision }}{% endif %}{% endfor %}</span></li>
      {%- endif -%}
      {% if showTags %}
        <li class="page-info__entry page-info__entry--tags">
          <span class="page-info__entry__key">Tags</span>
          <ul class="page-info__entry__value">
            {% for tag in tags %}
              {% if 'Topic/' in tag %}
                {% set label %}{{ tag | replace('Topic/', '') }}{% endset %}
                <li>{{ label }}</li>
              {% endif %}
            {% endfor %}
          </ul>
        </li>
      {% endif %}
      
      {% if backlinks.length > 0 %}
        <li class="page-info__entry page-info__entry--tags">
          <span class="page-info__entry__key">Backlinks</span>
          <ul class="page-info__entry__value">
            {% for link in backlinks %}
              <li class="sub-list__item"><a href="{{ link.url }}">{{ link.data.title }}</a></li>
            {% endfor %}
          </ul>
        </li>
      {% endif %}
    </ul>
  </aside>
{% endmacro %}