---
layout: page.njk
---
<div class="page page--notes">
  <nav class="navigation">
    <ul class="navigation__items">
      <li class="nav__item nav__title-container"><h1 class="nav__title">{{ meta.name | replace(' ', '&nbsp;') | safe }}</h1></li>
      <li class="nav__item"><a class="nav__link" href="feed.xml"><span>Subscribe</span></a></li>
      <li class="nav__item"><a class="nav__link" href="mailto:{{ meta.contact.email }}"><span>Email</span></a></li>
    </ul>
  </nav>
  <ol class="note-list" reversed>
    {% set currentDay = "" %}
    {% set currentMonth = "" %}
    {% set currentYear = "" %}
    {% for note in collections.Notes | reverse %}
      {% set noteDay = note.date | postDay %}
      {% set noteMonth = note.data.month %}
      {% set noteYear = note.data.year %}
      {% set notePrefix %}{% if (currentDay == noteDay) and (currentMonth == noteMonth) %}↳{% else %}{{ noteDay }}{% endif %}{% endset %}
      {% set showType %}{{ true if (note.data.type != 'Note') }}{% endset %}
      {% set isEvergreen %}{{ true if ("Evergreen" in note.data.tags) }}{% endset %}
      {% set showAccessories %}{{ true if showType or isEvergreen }}{% endset %}
      {% if currentMonth != noteMonth %}
        <li class="note-group__month">{% if currentYear != noteYear %}<h2 class="note__year">{{ noteYear }}</h2>{% endif %}<h3 class="note__month">{{ noteMonth }}</h3></li>
      {% endif %}
      <li class="note">
        <a href="{{ note.url }}" class="note__link{{ ' note__link--with-accessories' if showAccessories }}">
          {% if note.data.preview %}
            <div class="note__preview">
              {% if note.data.preview.type == 'vid' %}
                <video width="400" poster="{{ note.data.preview.src | replace('.mp4', '-poster.png')}}" autoplay loop muted playsinline>
                  <source src="{{ note.data.preview.src }}" type="video/mp4" />
                </video>
              {% endif %}
            </div>
          {% endif %}
          <span class="note__day">{{ notePrefix }}</span>
          <span class="note__title">{{ note.data.title }}</span>
          {% if showAccessories %}
            <ul class="note__accessories">
              {% if showType %}<li><span class="note__type note__type--{{ note.data.type | lower }}">{{ note.data.type }}</span></li>{% endif %}
              {% if isEvergreen %}<li><span class="note__type note__type--evergreen" data-version="{{ note.data.version }}">Evergreen</span></li>{% endif %}
            </ul>
          {% endif %}
        </a>
      </li>
      {% set currentDay = noteDay %}
      {% set currentMonth = noteMonth %}
      {% set currentYear = noteYear %}
    {% endfor %}
    <li class="note-list__copyright"><span class="copyright__glyph">©</span><span class="copyright__text">2008 - {% year %} {{ meta.name }}. Don't steal. I love you.</span></li>
  </ol>
</div>